<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Translator Hybrid - Indian & Global Languages</title>
<style>
body {
    margin:0;
    padding:40px 20px;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    background: linear-gradient(120deg, #0f0c29, #302b63, #24243e);
    background-size: 400% 400%;
    animation: gradientBG 25s ease infinite;
    color:white;
    display:flex;
    flex-direction:column;
    align-items:center;
    min-height:100vh;
    overflow-x: hidden;
}

/* Animated gradient background */
@keyframes gradientBG {
    0% {background-position:0% 50%;}
    50% {background-position:100% 50%;}
    100% {background-position:0% 50%;}
}

/* Header */
h2 {
    font-size:2.5rem;
    font-weight:bold;
    font-style:italic;
    background: linear-gradient(90deg, #00ffe0, #00b3ff, #ff00ff);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    margin-bottom: 30px;
}

/* Container for content */
.container {
    width:100%;
    max-width:800px;
    display:flex;
    flex-direction:column;
    align-items:center;
    gap:20px;
    position:relative;
}

/* Select boxes */
.select-container {
    display:flex;
    justify-content:center;
    flex-wrap:wrap;
    gap:10px 5px;
    align-items:center;
}
select {
    padding:12px;
    font-size:1.1rem;
    border-radius:10px;
    border:2px solid #00ffe0;
    background:#111;
    color:white;
    box-shadow: 0 0 10px rgba(0,255,224,0.4);
    transition: all 0.3s;
}
select:hover{
    border-color: #ff00ff;
    box-shadow: 0 0 15px #00ffe0, 0 0 20px #ff00ff;
}

/* Textarea */
textarea {
    width:100%;
    height:120px;
    padding:15px;
    font-size:1.25rem;
    font-style:italic;
    font-weight:500;
    border-radius:12px;
    background:#111;
    color:white;
    border:2px solid #00ffe0;
    box-shadow: 0 0 15px rgba(0,255,224,0.3);
    transition: all 0.3s;
}
textarea:focus {
    border-color:#ff00ff;
    box-shadow: 0 0 20px #00ffe0, 0 0 25px #ff00ff;
    outline:none;
}

/* Buttons container */
.button-container {
    display:flex;
    justify-content:center;
    flex-wrap:wrap;
    gap:10px;
}

/* Buttons */
button {
    padding:12px 35px;
    font-size:1.15rem;
    font-weight:bold;
    border:none;
    border-radius:12px;
    cursor:pointer;
    transition: all 0.3s;
    color:#0a0a0a;
}
button:hover{
    transform: scale(1.05);
}

/* Specific buttons */
button[onclick="voiceInput()"]{ background: linear-gradient(135deg, #00ffe0, #00b3ff); box-shadow: 0 4px 15px rgba(0,255,224,0.4);}
button[onclick="translateHybrid()"]{ background: linear-gradient(135deg, #ffb347, #ffcc33); box-shadow: 0 4px 15px rgba(255,179,71,0.4);}
button[onclick="stopReading()"]{ background: linear-gradient(135deg, #ff4e50, #f9d423); box-shadow: 0 4px 15px rgba(255,78,80,0.4);}

/* Back button bottom-left under output */
.back-btn {
    align-self: flex-end;       /* moves it to the right */
    background: linear-gradient(135deg, #ff00ff, #ff8a00);
    color: white;
    padding: 10px 20px;
    font-size: 1rem;
    border: none;
    border-radius: 10px;
    font-weight: bold;
    cursor: pointer;
    transition: all 0.3s;
    margin-top: 10px;
}

.back-btn:hover{
    transform: scale(1.05);
    box-shadow: 0 4px 15px rgba(255,0,255,0.6), 0 0 10px #ff8a00;
}

/* Output box */
#output{
    width:100%;
    height:120px;
    background:#111;
    border-radius:12px;
    padding:15px;
    font-size:1.2rem;
    color:white;
    overflow-y:auto;
    border:2px solid #00ffe0;
    box-shadow:0 0 15px rgba(0,255,224,0.3);
}
</style>
</head>
<body>

<h2>üåê Translator Hybrid - Indian & Global Languages</h2>

<div class="container">

    <!-- Language selection -->
    <div class="select-container">
        <select id="fromLang">
            <option value="auto">Auto Detect</option>
            <option value="en">English</option>
            <option value="hi">Hindi</option>
            <option value="bn">Bengali</option>
            <option value="mr">Marathi</option>
            <option value="ta">Tamil</option>
            <option value="te">Telugu</option>
            <option value="kn">Kannada</option>
            <option value="gu">Gujarati</option>
            <option value="pa">Punjabi</option>
            <option value="es">Spanish</option>
            <option value="fr">French</option>
            <option value="de">German</option>
            <option value="ja">Japanese</option>
            <option value="ko">Korean</option>
            <option value="ru">Russian</option>
            <option value="ar">Arabic</option>
        </select>
        <span>‚û°Ô∏è</span>
        <select id="toLang">
            <option value="en">English</option>
            <option value="hi">Hindi</option>
            <option value="bn">Bengali</option>
            <option value="mr">Marathi</option>
            <option value="ta">Tamil</option>
            <option value="te">Telugu</option>
            <option value="kn">Kannada</option>
            <option value="gu">Gujarati</option>
            <option value="pa">Punjabi</option>
            <option value="es">Spanish</option>
            <option value="fr">French</option>
            <option value="de">German</option>
            <option value="ja">Japanese</option>
            <option value="ko">Korean</option>
            <option value="ru">Russian</option>
            <option value="ar">Arabic</option>
        </select>
    </div>

    <!-- Input -->
    <textarea id="textInput" placeholder="Type or speak text to translate..."></textarea>

    <!-- Buttons -->
    <div class="button-container">
        <button onclick="voiceInput()">üé§ Speak</button>
        <button onclick="translateHybrid()">üåê Translate & Speak</button>
        <button onclick="stopReading()">‚èπ Stop Reading</button>
    </div>

    <!-- Output -->
    <div id="output" placeholder="Translated text will appear here..."></div>

    <!-- Back button under output -->
    <button class="back-btn" onclick="goBack()">‚¨Ö Back</button>

</div>

<script>
let recognition;
let speechInstance;

// Voice input
function voiceInput(){
    recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
    recognition.lang = "en-US";
    recognition.interimResults = false;
    recognition.continuous = false;

    recognition.onstart = () => {
        let msg = new SpeechSynthesisUtterance("Start speaking now for translation");
        speechSynthesis.speak(msg);
    };

    recognition.onresult = (event) => {
        let text = event.results[0][0].transcript;
        document.getElementById("textInput").value = text;
    };

    recognition.start();
}

// Translate and speak
async function translateHybrid(){
    const from = document.getElementById("fromLang").value;
    const to = document.getElementById("toLang").value;
    const text = document.getElementById("textInput").value.trim();

    if(text === ""){
        alert("Please enter or speak some text!");
        return;
    }

    const googleURL = `https://translate.google.com/?sl=${from}&tl=${to}&text=${encodeURIComponent(text)}&op=translate`;
    window.open(googleURL, "_blank");

    try{
        const response = await fetch('https://libretranslate.de/translate',{
            method:'POST',
            headers:{'Content-Type':'application/json'},
            body:JSON.stringify({
                q:text,
                source: from==="auto"?"en":from,
                target: to,
                format:"text"
            })
        });
        const data = await response.json();
        const translated = data.translatedText;

        document.getElementById("output").innerText = translated;

        speechInstance = new SpeechSynthesisUtterance(translated);
        const langMap = {
            "en":"en-US","hi":"hi-IN","bn":"bn-BD","mr":"mr-IN",
            "ta":"ta-IN","te":"te-IN","kn":"kn-IN","gu":"gu-IN",
            "pa":"pa-IN","es":"es-ES","fr":"fr-FR","de":"de-DE",
            "ja":"ja-JP","ko":"ko-KR","ru":"ru-RU","ar":"ar-SA"
        };
        speechInstance.lang = langMap[to] || "en-US";
        window.speechSynthesis.speak(speechInstance);
    } catch(err){
        console.error(err);
        alert("Translation failed. Check your internet connection.");
    }
}

// Stop reading
function stopReading(){
    if(window.speechSynthesis.speaking){
        window.speechSynthesis.cancel();
    }
}

// Back
function goBack(){
    window.location.href = "blind.html";
}
</script>
</body>
</html>
